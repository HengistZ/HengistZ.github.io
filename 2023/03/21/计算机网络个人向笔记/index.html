<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>计算机网络个人向笔记 | Hengist&#39;s Blog</title>
  <meta name="author" content="Hengist">
  
  <meta name="description" content="计算机网络与互联网概述本门课程章节：

计算机网络和互联网：绪论、关键术语和概念、框架性原理
应用层：
cs模型、p2p模型
DNS域名系统
电子邮件（SMTP, POP3, MIME）、FTP
万维网（HTTP）


传输层：
UDP, TCP
套接字编程


网络层：数据平面：
网络互联构造
路由算法


网络层：控制平面：
ipv4, 寻址


数据链路网和局域网（物理层）
局域网、拓扑
帧
奇偶校验码
循环冗余码（CRC）
海明码
CSMA
PPP


网络安全
无线和移动网络
多媒体网络
网络管理

计算机网络核心原理：自底向上，每一层都有功能，向上有接口，向上层提供服务。同时每一层的实现依赖下层接口。
Internet网络：节点和边
计算机网络：联网的计算机所构成的系统
互联网：以TCP、IP协议为主构成的计算机网络
Internet：网络的网络"> 
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="计算机网络个人向笔记"/>
  <meta property="og:site_name" content="Hengist&#39;s Blog"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="Hengist&#39;s Blog" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70812759-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70812759-1');
</script>






<meta name="generator" content="Hexo 6.3.0"></head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Hengist&#39;s Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class=""></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class=""></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Subscribe me.">
			  <i class=""></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> 计算机网络个人向笔记</h1>
		</div>
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h1 id="计算机网络与互联网"><a href="#计算机网络与互联网" class="headerlink" title="计算机网络与互联网"></a>计算机网络与互联网</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>本门课程章节：</p>
<ol>
<li><strong>计算机网络和互联网</strong>：绪论、关键术语和概念、框架性原理</li>
<li><strong>应用层</strong>：<ul>
<li>cs模型、p2p模型</li>
<li>DNS域名系统</li>
<li>电子邮件（SMTP, POP3, MIME）、FTP</li>
<li>万维网（HTTP）</li>
</ul>
</li>
<li><strong>传输层</strong>：<ul>
<li>UDP, TCP</li>
<li>套接字编程</li>
</ul>
</li>
<li><strong>网络层：数据平面</strong>：<ul>
<li>网络互联构造</li>
<li>路由算法</li>
</ul>
</li>
<li><strong>网络层：控制平面</strong>：<ul>
<li>ipv4, 寻址</li>
</ul>
</li>
<li><strong>数据链路网和局域网（物理层）</strong><ul>
<li>局域网、拓扑</li>
<li>帧</li>
<li>奇偶校验码</li>
<li>循环冗余码（CRC）</li>
<li>海明码</li>
<li>CSMA</li>
<li>PPP</li>
</ul>
</li>
<li><strong>网络安全</strong></li>
<li><strong>无线和移动网络</strong></li>
<li><strong>多媒体网络</strong></li>
<li><strong>网络管理</strong></li>
</ol>
<p><strong>计算机网络核心原理</strong>：自底向上，每一层都有功能，向上有接口，向上层提供服务。同时每一层的实现依赖下层接口。</p>
<h2 id="Internet"><a href="#Internet" class="headerlink" title="Internet"></a>Internet</h2><p><strong>网络</strong>：节点和边</p>
<p><strong>计算机网络</strong>：联网的计算机所构成的系统</p>
<p><strong>互联网</strong>：以TCP、IP协议为主构成的计算机网络</p>
<p>Internet：网络的网络</p>
<h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h3><p><strong>主机节点（端节点）</strong>：电脑、智能设备（数据源、数据目标）（host, end system）</p>
<p><strong>数据交换节点</strong>：路由器、交换机、中继器（不同层的）（数据中转站）</p>
<h3 id="边"><a href="#边" class="headerlink" title="边"></a>边</h3><p><strong>链路</strong>：光纤、电缆、无线电、卫星等</p>
<p><strong>带宽</strong>：传输速率，bps (bits per second)</p>
<p><strong>接入网链路</strong>：主机连接到互联网</p>
<p><strong>主干链路</strong>：路由器间</p>
<h3 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h3><p>互联网信息传输的标准，使得不同厂商的设备实现互操作</p>
<p><strong>定义：对等层的实体，在通信的过程当中应该遵守的规则的集合</strong></p>
<p>定义了两个或多个通信实体之间交换的报文<strong>格式和次序</strong>，以及在报文传输接收等事件中所采取的<strong>动作</strong></p>
<p>例如：主机需要访问服务器，首先会发送一个tcp协议请求，当请求通过后，两者建立连接，采用tcp协议进行通信</p>
<h3 id="从服务角度"><a href="#从服务角度" class="headerlink" title="从服务角度"></a>从服务角度</h3><p><strong>互联网</strong>&#x3D;分布式应用进程+基础设施（向进程提供通信服务）</p>
<p>分布式的应用是互联网存在的原因，也是目的。</p>
<p>本机操作系统向应用进程提供的网络接口：socket api，使得应用进程可以和其他主机应用进程通讯</p>
<p>TCP：面向连接的服务</p>
<p>UDP：无连接的服务</p>
<h2 id="网络结构"><a href="#网络结构" class="headerlink" title="网络结构"></a>网络结构</h2><p><strong>网络边缘：主机（包含分布式的应用进程和协议）</strong>，也就是信息源，发出端，作用是支持其上的网络应用的通信</p>
<p><strong>网络核心：路由器和网络的网络</strong>，作用是连接所有的端系统，全球范围内的所有节点的数据交换</p>
<p><strong>网络接入：网络边缘接入到网络核心的链路</strong></p>
<p>除了应用进程之外其他的都算基础设施</p>
<h3 id="网络边缘"><a href="#网络边缘" class="headerlink" title="网络边缘"></a>网络边缘</h3><h4 id="网络通信模式"><a href="#网络通信模式" class="headerlink" title="网络通信模式"></a>网络通信模式</h4><p><strong>cs模式</strong>：client-server客户端服务器模式：服务器先启动，让客户端发送请求，请求服务器的软硬件资源<br>server farm 服务器农场<br>缺点：可扩展性较差，但请求数量到达阈值时断崖式下降</p>
<p><strong>P2P模式</strong>：peer to peer 向其他的客户端请求数据<br>例如迅雷，可以将一个文件拆成多个片段分别从不同的客户端下载，可以提高下载速度</p>
<h4 id="协议类型"><a href="#协议类型" class="headerlink" title="协议类型"></a>协议类型</h4><p>面向连接：先打招呼，确定连接，之后请求</p>
<p>非连接：直接请求</p>
<p>可靠的通讯：不丢失、不出错、不重复、不乱序</p>
<p>例如tcp的作用：下层不可靠，但需要为上层服务提供可靠的通讯，因此需要用时间和空间提升其通讯的可靠性<br>同时，tcp还会实现流量控制，确保从服务器发出的信息都能被处理<br>第三，tcp还会实现拥塞控制，检测网络核心的链路是否有堵塞，如果有，则控制其发送速率</p>
<p>udp则不同：无连接、不可靠、无流量控制、无拥塞控制</p>
<h3 id="网络核心"><a href="#网络核心" class="headerlink" title="网络核心"></a>网络核心</h3><p>网络核心数据交换模式：</p>
<h4 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h4><p>为每一个呼叫预留一条专有线路，例如电话线</p>
<p>每两台路由器之间的链路被分为多条<strong>片</strong>，呼叫时由信令系统在路径上每两台路由器之间选择一条，最终连成一条唯一的线路<br>分片方式有频分FDM（不同频率段），时分TDM（不同时间段），波分WDM（光纤不同波长）</p>
<p>每个呼叫只要建立起来就能够保证性能，但如果呼叫没有发送数据，则被分配的线路就会被浪费</p>
<blockquote>
<p><strong>时空图</strong>：AB两条竖直的平行线表示两台主机的时间，记得考虑接收时间延迟</p>
</blockquote>
<p><strong>电路交换不适合计算机之间通讯</strong>：</p>
<ol>
<li><p>连线建立时间长</p>
</li>
<li><p>计算机通信具有突发性，浪费的片较多</p>
</li>
</ol>
<h4 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h4><p>将要传输的数据分成一个个单位（<strong>分组</strong>），在传输时由路由器分别传输到可能不同的相邻的路由器，每个路由器经过存储、转发，最终合并</p>
<p>采用链路的最大的传输能力</p>
<p>采用存储转发的方式使得整条链路不同路由器之间的线路不是时时刻刻被占用，<strong>按需使用</strong><br>延迟较大，因为只有整个分组全部传达后才开始转发</p>
<p>如果到达速率大于输出速率：</p>
<ol>
<li><p>链路会排队等待传输</p>
</li>
<li><p>如果缓存用完了分组会被抛弃</p>
</li>
</ol>
<p><strong>关键功能</strong></p>
<ol>
<li><p><strong>路由</strong>：决定分组采用的源到目标的路径</p>
</li>
<li><p><strong>转发</strong>：路由器将分组从输入转移到输出链路，由 <strong>路由算法</strong>决定</p>
</li>
</ol>
<p><strong>统计多路复用</strong>：AB都作为数据源争夺链路，采用某种算法将链路按照时间分给AB（不是平均分）</p>
<p><strong>分组交换允许更多用户使用网络</strong>：<br>比如链路最多容纳10个用户，现在有35个用户，那么挤爆的概率是1 - sigma(n&#x3D;1 &#x2F; 9) ( Cn&#x2F;35 * P^n^ * (1-P)^(35-n)^ ) &#x3D; 0.004<br>同时，还有等待队列，因此不会爆</p>
<p><strong>分类</strong>：</p>
<ol>
<li><p><strong>数据报网络datagram</strong>：无连接，每个分组携带目标完整地址，由此决定下一跳的路由器，不同阶段可以改变路由，不需要维护主机间通信的状态<br>路径不一样，可能会失序<br>internet</p>
</li>
<li><p><strong>虚电路网络</strong>：有连接，主机通讯前先握手，建立虚拟线路，每个分组携带虚电路号<br>虚电路号仅标识两个路由器之间的链路，每次存储转发会变化<br>虚电路表存储源路由器名，源虚电路号，目标路由器名，目标虚电路号<br>x.25 和 ATM</p>
</li>
</ol>
<h3 id="网络接入"><a href="#网络接入" class="headerlink" title="网络接入"></a>网络接入</h3><p><strong>端系统和边缘路由器的连接</strong></p>
<p><strong>接入带宽</strong></p>
<p><strong>共享&#x2F;专用</strong></p>
<h4 id="接入方式"><a href="#接入方式" class="headerlink" title="接入方式"></a>接入方式</h4><ol>
<li><strong>（调制解调器modem（猫））</strong>在电话线发出端，modem将正弦波音频进行调频与调相位等操作，传递数据信息，用另一个modem解读<br>在<strong>音频载波信号上加载了上网的数据</strong>，因此叫“<strong>网上冲浪</strong>”</li>
<li><strong>（DSL）</strong>在电话线中，0-4kHz用于语音通信，4k以上用于传递数据信息，例如4-6k上行，6-10k下行（下行更大）</li>
<li><strong>（线缆网络）</strong>利用有线电视，将有线电缆数字化，但只有下行，上行依然需要modem（共享）</li>
<li>家庭、企业接入：区域内有线&#x2F;无线先接到路由器，再由路由器统一接到互联网</li>
<li><strong>（无线局域网WLAN）</strong></li>
<li><strong>（广域无线网）</strong>由电信运营商提供，通过基站、4G5G方式接入互联网</li>
</ol>
<p><strong>应用和网络相互促进</strong>：应用需要更高带宽更低延时促进网络发展，网络发展后又促进新应用产生</p>
<h4 id="物理媒体"><a href="#物理媒体" class="headerlink" title="物理媒体"></a>物理媒体</h4><p>相邻两个节点之间传输比特的线路</p>
<p>导引型媒介：光纤、电缆、电话线…</p>
<ul>
<li><p>双绞线：两根&#x2F;n根具备绝缘层的铜线拧合而成</p>
</li>
<li><p>同轴电缆：两根同心铜导线</p>
</li>
<li><p>光缆：光信号，很少受电磁波影响，误码率低（骨干链路几乎都是）</p>
</li>
</ul>
<p>非导引型媒介：电磁波、…</p>
<ul>
<li>卫星：同步轨道卫星，延迟很大（数百毫秒 ）</li>
<li>地面微波</li>
<li>无线网LAN</li>
<li>广域网：蜂窝移动网络</li>
</ul>
<h3 id="互联网结构"><a href="#互联网结构" class="headerlink" title="互联网结构"></a>互联网结构</h3><p><strong>互联网：网络的网络</strong></p>
<h4 id="ISP"><a href="#ISP" class="headerlink" title="ISP"></a>ISP</h4><p><strong>internet service provider 互联网业务提供商</strong>：移动、联通、电信</p>
<p>端系统通过接入ISP后再连接到互联网</p>
<p>global ISP：全球范围内接入ISP的ISP</p>
<h4 id="POP-x2F-IXP"><a href="#POP-x2F-IXP" class="headerlink" title="POP&#x2F;IXP"></a>POP&#x2F;IXP</h4><p>point of presence 负责高层ISP和低层ISP之间的互联</p>
<p>internet exchange point 负责ISP之间的数据互联</p>
<h4 id="ICP"><a href="#ICP" class="headerlink" title="ICP"></a>ICP</h4><p><strong>internet contence provider 互联网内容提供商</strong>：百度、谷歌</p>
<p>例如谷歌或腾讯，因为isp提供的服务价格高质量不稳定，采用在各地部署机房再利用局部isp去节约成本</p>
<h2 id="分组交换相关概念"><a href="#分组交换相关概念" class="headerlink" title="分组交换相关概念"></a>分组交换相关概念</h2><h3 id="一跳-x2F-一段（hop）"><a href="#一跳-x2F-一段（hop）" class="headerlink" title="一跳&#x2F;一段（hop）"></a>一跳&#x2F;一段（hop）</h3><p><strong>两个路由器之间的延时</strong></p>
<h3 id="阻塞"><a href="#阻塞" class="headerlink" title="阻塞"></a>阻塞</h3><p><strong>流量程度 I&#x3D;a×L&#x2F;R 单位时间内到达分组数量×分组大小&#x2F;带宽</strong></p>
<p>I&#x3D;0-1，期望排队时间呈指数增长，I&gt;1期望排队时间无穷大</p>
<h3 id="分组丢失"><a href="#分组丢失" class="headerlink" title="分组丢失"></a>分组丢失</h3><p>在路由器中，每条链路都对应相应队列，分组进入后通过查询路由表确定要从该链路传输后，如果链路中有分组还在传输，则新到达分组在队列中排队</p>
<p><strong>如果此时队列溢出，则分组丢失</strong></p>
<h3 id="分组延时"><a href="#分组延时" class="headerlink" title="分组延时"></a>分组延时</h3><ol>
<li><strong>处理延时</strong>：分组进入路由器后需要查询路由表排队等处理时间</li>
<li><strong>排队延时</strong>：在等待传输队列中的排队时间</li>
<li><strong>传输延时：</strong>分组全部发出（接收）的时间（分组大小&#x2F;带宽）</li>
<li><strong>传播延时</strong>：链路中传播的时间（物理链路长度&#x2F;速度）</li>
</ol>
<h1 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h1><h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h2><h3 id="CS模型"><a href="#CS模型" class="headerlink" title="CS模型"></a>CS模型</h3><p><strong>服务器、客户端</strong></p>
<p><strong>工作流程</strong>： 服务器处于接受请求状态 -  客户机发出请求，等待接受结果 - 服务器收到请求，进行分析和处理，得到结果返回客户机</p>
<p><strong>特点</strong>：客户机之间不直接通信，可扩展性较弱</p>
<p>例如：web， FTP</p>
<h3 id="P2P模型"><a href="#P2P模型" class="headerlink" title="P2P模型"></a>P2P模型</h3><p>peer to peer，没有特定的客户端和服务器之分，每个主机地位相等，直接通信，每个节点既作为客户也作为服务器。</p>
<p><strong>反对p2p</strong>：隐私性强、无法精确流量监控</p>
<p><strong>p2p损坏机械硬盘</strong>：分段传输、不连续，磁针需要经常反转急停</p>
<p><strong>网络拥塞</strong></p>
<h2 id="DNS系统"><a href="#DNS系统" class="headerlink" title="DNS系统"></a>DNS系统</h2><p><strong>Domain Name System，用于将域名转换成IP地址</strong></p>
<p><em>域名和URL的区别：域名+ip地址&#x3D;URL</em></p>
<p>运行在UDP上，用53号端口</p>
<p>英文不区分大小写，只能使用连字符“-”，每个符号不超过63字符，总长度不超过255字符，从左到右级别从低到高</p>
<h3 id="域名分类"><a href="#域名分类" class="headerlink" title="域名分类"></a>域名分类</h3><p>根域名服务器：最高层次，用于存储顶级域名服务器ip</p>
<p>顶级域名服务器（TLD服务器）：国家nTLD（.cn, .hk），通用gTLD（.com, .net, .top），返回</p>
<p>权威域名服务器：返回ip，例如baidu, google</p>
<p><strong>迭代查询</strong>：本地依次查询根域名、TLD域名、权威域名服务器</p>
<p><strong>递归查询</strong>：本地查询根域名，根域名查询TLD域名、TLD域名查询权威域名，逐级返回</p>
<p>DNS服务器有缓存，但在一段时间后丢弃</p>
<h2 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h2><p><strong>用户代理UA</strong>：向用户的接口（客户端）</p>
<h3 id="邮件服务器"><a href="#邮件服务器" class="headerlink" title="邮件服务器"></a>邮件服务器</h3><p><strong>SMTP协议</strong>：邮件发送协议，用户代理向服务器发送邮件或服务器间发送</p>
<p><strong>POP3</strong>：邮件读取协议，用户代理从邮件服务器读取邮件</p>
<p><strong>MIME</strong>：可传输二进制对象、多媒体等</p>
<h2 id="WWW"><a href="#WWW" class="headerlink" title="WWW"></a>WWW</h2><p><strong>World Wide Web，万维网</strong></p>
<p><strong>统一资源定位符URL</strong>：文档的唯一标识</p>
<p><strong>超文本传输协议HTTP</strong>：应用层协议，使用TCP进行可靠传输</p>
<p><strong>超文本标记语言HTML</strong>：对页面上的信息进行标记</p>
<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><p>每个站点有一个服务器进程，默认端口80</p>
<p>状态码：1XX，2XX表示成功，3XX表示重定向，4XX客户端前端问题，5XX后端数据库问题</p>
<p>持久连接：服务器在发送响应后仍然保持这条连接，使每个用户和服务器可以继续在这条连接上传送 后续的HTTP请求与响应报文</p>
<p>​	非流水线：客户收到前一个响应才发出下一个请求</p>
<p>​	流水线：客户每遇到一个对象发出一个请求</p>
<p>非持久连接：每个网页元素（如JPEG图形，Flash等）的传输 都需要单独建立一个TCP连接</p>
<h1 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h1><h2 id="传输层协议"><a href="#传输层协议" class="headerlink" title="传输层协议"></a>传输层协议</h2><h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><p><strong>客户端与服务器端口间通信</strong></p>
<p><strong>报文首部内容：</strong></p>
<ol>
<li>源端口、目的端口，各自占4字节</li>
<li>序号<strong>seq</strong>（<strong>起始序号</strong>）：4字节，本段报文的起始序号，<strong>TCP字段中每个字节有一个序号，按顺序</strong></li>
<li>确认号<strong>ack</strong>（<strong>截止序号+1</strong>）：4字节，报文全部收到后，下一个报文的起始序号</li>
<li>数据偏移：4位，报文数据与报文段的距离，即首部长度</li>
<li>保留，6位，均为0</li>
<li>紧急URG：当URG&#x3D;1时，紧急字段有效表示紧急信息</li>
<li><strong>确认ACK，当ACK&#x3D;1时，字段有效</strong></li>
<li>推送PSH，一方键入后能立即收到对方响应</li>
<li>复位RST，要求释放连接并重新建立</li>
<li>同步SYN，<strong>SYN&#x3D;1, ACK&#x3D;0为请求连接报文，SYN&#x3D;1, ACK&#x3D;1为同意连接报文</strong></li>
<li>终止FIN，<strong>FIN&#x3D;1要求释放连接</strong></li>
<li>窗口：2字节，发送方告诉接收方的需要预留空间</li>
<li>检验和：2字节，校验首部和数据两部分</li>
<li>紧急指针：2字节，紧急数据字节数</li>
</ol>
<h4 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h4><p>（服务器处于LISTEN（监听）状态）</p>
<ol>
<li>客户端：你好（<strong>SYN&#x3D;1</strong>），我要给你我这边序号x的报文（<strong>seq&#x3D;x</strong>）</li>
</ol>
<p><em>（客户端进程进入了 SYN-SENT（同步已发送状态）状态）</em></p>
<ol start="2">
<li>服务器：你好（<strong>SYN&#x3D;1</strong>），我能收到你（<strong>ACK&#x3D;1</strong>），我要给你我这边y的信息（<strong>seq&#x3D;y</strong>），我期待收到你那边序号x+1的报文（<strong>ack&#x3D;x+1</strong>）</li>
</ol>
<p><em>（进入了SYN-RCVD（同步收到）状态）</em></p>
<ol start="3">
<li>客户端：好的，我能收到你（<strong>ACK&#x3D;1</strong>），我继续给你我这边序号x+1的报文（<strong>seq&#x3D;x+1</strong>），并且期待收到你那边序号y+1的报文（<strong>ack&#x3D;y+1</strong>）</li>
</ol>
<p><em>（双方进入了ESTABLISHED（已建立连接）状态）</em></p>
<p>![image-20230223161955975](E:\Program Files (x86)\typora\images\计算机网络\image-20230223161955975.png)</p>
<h4 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h4><ol>
<li><p>客户端：我已经发送完我所有信息了，拜拜（<strong>FIN&#x3D;1</strong>），这条报文是为了和你告别的（<strong>seq&#x3D;u</strong>）</p>
<p><em>（客户端进入了 FIN-WAIT-1（终止等待1）状态）</em></p>
</li>
<li><p>服务器：好的收到（<strong>ACK&#x3D;1</strong>），我也将发送我的最后信息（<strong>seq&#x3D;v</strong>），期待收到你的最后报文（<strong>ack&#x3D;u+1</strong>）</p>
<p><em>（进入CLOSE-WAIT（关闭等待）状态，服务器无法再接收到客户端的消息，但依然发送消息）</em></p>
<p><em>（客户端收到后进入了（FIN-WAIT-2（终止等待2）状态））</em></p>
<p>服务器发送报文中……</p>
</li>
<li><p>服务器：好了，我已经发送完我所有信息了（<strong>ACK&#x3D;1</strong>），咱们可以结束了（<strong>FIN&#x3D;1</strong>），这是我的最后报文（<strong>seq&#x3D;w</strong>），期待收到你的最后报文（<strong>ack&#x3D;u+1</strong>），再见！</p>
<p><em>（服务器进入了LAST-ACK（最后确认）状态）</em></p>
</li>
<li><p>客户端：收到了（<strong>ACK&#x3D;1</strong>），收到你最后报文了（<strong>ack&#x3D;w+1</strong>），这是我的最后报文（<strong>seq&#x3D;u+1</strong>），再见！<br><em>（进入TIME-WAIT（时间等待）状态，此时TCP连接还没有释放，必须经过 2 MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。）</em></p>
<p><em>（服务器收到后进入CLOSED状态）</em></p>
</li>
</ol>
<p>![image-20230223163448163](E:\Program Files (x86)\typora\images\计算机网络\image-20230223163448163.png)</p>
<h1 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h1><h2 id="路由系统"><a href="#路由系统" class="headerlink" title="路由系统"></a>路由系统</h2><ul>
<li><strong>转发forwarding</strong>是指将分组从一个输入链路接口移动到适当的输出链路接口的路由器本地动作。时间尺度很短，通常为几纳秒。</li>
<li><strong>路由选择routing</strong>是指确定分组从源到目的地所采取的端到端路径的网络范围处理过程，时间尺度较长，通常为几秒。</li>
</ul>
<p><strong>转发表</strong>：字段索引，转发分组</p>
<ul>
<li>传统方式：路由选择算法在路由器间进行转发，通过路由选择协议将路由选择信息报文放入转发表</li>
<li>SDN方式，远程控制器计算分发给每个路由器使用</li>
</ul>
<h2 id="SDN"><a href="#SDN" class="headerlink" title="SDN"></a>SDN</h2><p>软件定义网络，对路由器采用集中控制，远程控制</p>
<p>具有很好的可编程性，SDN系统北向编程接口，南向控制接口等</p>
<p>集中高效管理，提高性能降低成本，不过</p>
<h3 id="路由算法"><a href="#路由算法" class="headerlink" title="路由算法"></a>路由算法</h3><p><strong>静态路由算法：</strong>手工配置</p>
<h2 id="ipv4"><a href="#ipv4" class="headerlink" title="ipv4"></a>ipv4</h2><h3 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h3><p>![image-20230223211120092](E:\Program Files (x86)\typora\images\计算机网络\image-20230223211120092.png)</p>
<p><strong>广播地址：将后面0的部分都变成1</strong></p>
<p>其中&#x2F;18是子网长度（<strong>CIDR协议</strong>）</p>
<h3 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h3><p>DHCP服务器（路由器）给下属的主机分配ip</p>
<p>主机发discover-&gt;DHCP回复offer -&gt; 主机问request -&gt;DHCP回ack</p>
<h1 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h1><h2 id="局域网"><a href="#局域网" class="headerlink" title="局域网"></a>局域网</h2><h2 id="广域网"><a href="#广域网" class="headerlink" title="广域网"></a>广域网</h2><h2 id="可靠传输协议"><a href="#可靠传输协议" class="headerlink" title="可靠传输协议"></a>可靠传输协议</h2><h3 id="停止等待协议"><a href="#停止等待协议" class="headerlink" title="停止等待协议"></a>停止等待协议</h3><p><strong>一帧一帧发送，收到ACK后才能发送下一帧</strong></p>
<p>发送方装备<strong>计时器</strong>，如果一定时间内未收到接收方的确认帧（ACK），则再次发送相同的数据帧。</p>
<p>在接收方收到重复数据帧时，丢弃，并且重新发送确认帧（ACK）</p>
<h3 id="GBN"><a href="#GBN" class="headerlink" title="GBN"></a>GBN</h3><p>发送方发送窗口：将几个帧归为一组，一次性发送之后等待</p>
<p>接收方：从小编号开始逐个接收，接收到大编号的帧，如果其之前未得到确认，则丢弃。</p>
<p>发送方，当收到一个确认帧时，得知该帧和之前所有帧都发送成功了，发送窗口后移。</p>
<h3 id="SR"><a href="#SR" class="headerlink" title="SR"></a>SR</h3><p>发送方发送窗口不变，不过需要逐帧确认。</p>
<p>接收方有一个缓冲区，接收到大编号的帧，如果其之前未得到确认，则进入缓冲区返回ACK。直到接收窗口边缘或者缓冲区满。</p>
<p>接收到小编号帧时，从缓冲区找大编号帧。</p>
<p>收到一个错误帧，返回NAK，要求发送方重传。</p>
<h2 id="循环冗余码CRC"><a href="#循环冗余码CRC" class="headerlink" title="循环冗余码CRC"></a>循环冗余码CRC</h2><p>![image-20230223223604163](E:\Program Files (x86)\typora\images\计算机网络\image-20230223223604163.png)</p>
<h2 id="CSMA"><a href="#CSMA" class="headerlink" title="CSMA"></a>CSMA</h2><h3 id="ALOHA"><a href="#ALOHA" class="headerlink" title="ALOHA"></a>ALOHA</h3><p>不监听，想发就发，一段时间内未收到确认就重发</p>
<h3 id="时隙ALOHA"><a href="#时隙ALOHA" class="headerlink" title="时隙ALOHA"></a>时隙ALOHA</h3><p>分时间片，多个端口想要占用信道，在时间片开始想用就用</p>
<h3 id="1-坚持-CSMA"><a href="#1-坚持-CSMA" class="headerlink" title="1-坚持 CSMA"></a>1-坚持 CSMA</h3><p>坚持监听，有空隙就发送，不过可能几个同时发送，会冲突</p>
<h3 id="非坚持CSMA"><a href="#非坚持CSMA" class="headerlink" title="非坚持CSMA"></a>非坚持CSMA</h3><p>隔一段时间监听一次，有空隙就发送</p>
<h3 id="P-坚持CSMA"><a href="#P-坚持CSMA" class="headerlink" title="P-坚持CSMA"></a>P-坚持CSMA</h3><p>一直监听，有空隙则有概率P发送，否则到下一个时间片监听</p>
<h3 id="CSMA-x2F-CD"><a href="#CSMA-x2F-CD" class="headerlink" title="CSMA&#x2F;CD"></a>CSMA&#x2F;CD</h3><p>以太网协议，一直监听，有空闲就发，产生冲突时比较二进制指数（逐位比大小）</p>
<p>边发送边侦听，一旦出现碰撞马上停止发送，等待一段时间重新监听</p>
<h3 id="CSMA-x2F-CA"><a href="#CSMA-x2F-CA" class="headerlink" title="CSMA&#x2F;CA"></a>CSMA&#x2F;CA</h3><p>一直监听，有空闲就发RTS（预约）</p>
<p>收到CTS（预约成功，监听后发送），发送帧，每次等待ACK</p>
<h2 id="PPP"><a href="#PPP" class="headerlink" title="PPP"></a><strong>PPP</strong></h2><hr>

	  <div class="article-footer-copyright">

    本博客采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议(CC BY-NC-SA 4.0) 发布.</a>
</div>

	</div>

	
	
	<div>
  	<center>

	<div class="pagination">

    
    
    <a href="/2023/03/21/数据库系统个人向笔记/" type="button" class="btn btn-default"><i
                class="fa fa-arrow-circle-o-left"></i> Prev</a>
    

    <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/2023/03/21/Java常用API个人向总结/" type="button" class="btn btn-default ">Next<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>


    </center>
	</div>
	
	<!-- comment -->
	<!--
<section id="comment">
    <h2 class="title">Comments</h2>

    
</section>

-->
	
	
	
	</div> <!-- col-md-9/col-md-12 -->


	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2023-03-21 
	</div>
	

	<!-- categories -->
    

	<!-- tags -->
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

		

	</div>
	
		

</div><!-- row -->

<!--
 -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  
  &copy; 2023 Hengist's Blog
  
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.Theme <a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" target="_blank">freemind.bithack</a>  
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
